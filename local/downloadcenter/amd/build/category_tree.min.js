/**
 * Category tree navigation for download center
 *
 * @module     local_downloadcenter/category_tree
 * @copyright  2025 Alonso Arias <soporte@ingeweb.co>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_downloadcenter/category_tree",["jquery","core/ajax","core/templates"],(function($,Ajax,Templates){const CategoryTree=function(){this.init()};return CategoryTree.prototype.init=function(){const self=this;$(".category-expand").on("click",(function(e){e.preventDefault();const $this=$(this),categoryid=$this.data("categoryid"),$container=$this.closest(".category-node").find(".category-courses").first();$container.hasClass("loaded")?$container.slideToggle():self.loadCategoryCourses(categoryid,$container),$this.find("i").toggleClass("fa-plus fa-minus")})),$(".category-checkbox").on("change",(function(){const $this=$(this),checked=$this.is(":checked"),$container=$this.closest(".category-node");$container.find(".course-checkbox").prop("checked",checked).trigger("change"),$container.find(".category-checkbox").not(this).prop("checked",checked)})),this.updateTriStateCheckboxes()},CategoryTree.prototype.loadCategoryCourses=function(categoryid,$container){Ajax.call([{methodname:"local_downloadcenter_get_category_courses",args:{categoryid:categoryid},done:function(response){Templates.render("local_downloadcenter/course_list",response).then((function(html){$container.html(html).addClass("loaded").slideDown()}))},fail:function(error){Notification.exception(error)}}])},CategoryTree.prototype.updateTriStateCheckboxes=function(){$(".category-node").each((function(){const $node=$(this),$checkbox=$node.find(".category-checkbox").first(),$courses=$node.find(".course-checkbox");if(0===$courses.length)return;const total=$courses.length,checked=$courses.filter(":checked").length;0===checked?($checkbox.prop("checked",!1),$checkbox.prop("indeterminate",!1)):checked===total?($checkbox.prop("checked",!0),$checkbox.prop("indeterminate",!1)):($checkbox.prop("checked",!1),$checkbox.prop("indeterminate",!0))}))},{init:function(){return new CategoryTree}}}));

//# sourceMappingURL=category_tree.min.js.map