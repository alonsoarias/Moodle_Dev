/**
 * Admin selection JavaScript for download center
 *
 * @module     local_downloadcenter/admin_selection
 * @copyright  2025 Alonso Arias <soporte@ingeweb.co>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_downloadcenter/admin_selection",["jquery","core/ajax","core/notification","core/str"],(function($,Ajax,Notification,Str){const AdminSelection=function(){this.init()};return AdminSelection.prototype.init=function(){const self=this;$(document).on("change",'.course-selector input[type="checkbox"]',(function(){const courseid=$(this).data("courseid"),selected=$(this).is(":checked");self.toggleCourse(courseid,selected)})),$(document).on("change",'#downloadoptions input[type="checkbox"]',(function(){self.saveOptions()})),$(document).on("click",".category-header",(function(){$(this).closest(".category-container").find(".category-courses").slideToggle(),$(this).find(".fa").toggleClass("fa-chevron-down fa-chevron-up")})),this.updateSelectionCount(),$('[data-toggle="tooltip"]').tooltip()},AdminSelection.prototype.toggleCourse=function(courseid,selected){const self=this;$.ajax({url:M.cfg.wwwroot+"/local/downloadcenter/index.php",type:"POST",data:{action:"togglecourse",courseid:courseid,selected:selected?1:0,sesskey:M.cfg.sesskey},success:function(response){self.updateSelectionCount();const $label=$('input[data-courseid="'+courseid+'"]').closest("label");selected?$label.addClass("selected"):$label.removeClass("selected")},error:function(){Notification.exception(new Error("Failed to update selection"))}})},AdminSelection.prototype.saveOptions=function(){const options={excludestudent:$("#id_excludestudent").is(":checked")?1:0,includefiles:$("#id_includefiles").is(":checked")?1:0,filesrealnames:$("#id_filesrealnames").is(":checked")?1:0,addnumbering:$("#id_addnumbering").is(":checked")?1:0};$.ajax({url:M.cfg.wwwroot+"/local/downloadcenter/index.php",type:"POST",data:Object.assign({action:"updateoptions",sesskey:M.cfg.sesskey},options),success:function(){const $feedback=$("#options-feedback");0===$feedback.length?$('<div id="options-feedback" class="alert alert-success">Options saved</div>').insertAfter("#downloadoptions").delay(2e3).fadeOut():$feedback.show().delay(2e3).fadeOut()},error:function(){Notification.exception(new Error("Failed to save options"))}})},AdminSelection.prototype.updateSelectionCount=function(){const count=$('.course-selector input[type="checkbox"]:checked').length;$(".selection-count").text(count),count>0?$("#download-selection").prop("disabled",!1):$("#download-selection").prop("disabled",!0)},{init:function(){return new AdminSelection}}}));

//# sourceMappingURL=admin_selection.min.js.map