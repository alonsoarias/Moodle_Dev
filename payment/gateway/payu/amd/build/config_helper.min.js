/**
 * PayU configuration helper for auto-filling sandbox credentials.
 *
 * @module     paygw_payu/config_helper
 * @copyright  2024 Orion Cloud Consulting SAS
 * @author     Alonso Arias <soporte@orioncloud.com.co>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("paygw_payu/config_helper",["jquery","core/notification","core/str"],(function($,Notification,Str){const SANDBOX_CREDENTIALS={merchantid:"508029",payuaccountid:"512321",apilogin:"pRRXKOl8ikMmt9u",apikey:"4Vj8eK4rloUd272L48hsrarnUA"},TEST_CARDS={VISA_APPROVED:{number:"4111111111111111",cvv:"123",expMonth:"12",expYear:"2029",name:"APPROVED",network:"VISA"},MASTERCARD_APPROVED:{number:"5424000000000015",cvv:"123",expMonth:"12",expYear:"2029",name:"APPROVED",network:"MASTERCARD"},AMEX_APPROVED:{number:"370000000000002",cvv:"1234",expMonth:"12",expYear:"2029",name:"APPROVED",network:"AMEX"},DINERS_APPROVED:{number:"36018623456787",cvv:"123",expMonth:"12",expYear:"2029",name:"APPROVED",network:"DINERS"},VISA_DECLINED:{number:"4000000000000002",cvv:"123",expMonth:"12",expYear:"2029",name:"DECLINED",network:"VISA"},VISA_INSUFFICIENT:{number:"4000000000000063",cvv:"123",expMonth:"12",expYear:"2029",name:"INSUFFICIENT_FUNDS",network:"VISA"}},TEST_PSE_bank="1022",TEST_PSE_userType="N",TEST_PSE_document="1234567890",TEST_PSE_phone="3001234567",TEST_PSE_email="test@payulatam.com",TEST_PSE_name="TEST USER PSE",TEST_NEQUI_phone="3004567890",TEST_NEQUI_document="1234567890",TEST_CASH_document="1234567890",TEST_CASH_phone="3001234567",setupConfigPage=function($testModeCheckbox){addSandboxHelperSection(),$testModeCheckbox.on("change",(function(){$(this).is(":checked")?($("#payu-sandbox-helper").slideDown(),showSandboxPrompt()):($("#payu-sandbox-helper").slideUp(),$("#payu-sandbox-indicator").remove())})),$testModeCheckbox.is(":checked")&&($("#payu-sandbox-helper").show(),highlightSandboxMode())},addSandboxHelperSection=function(){const $testModeRow=$('input[name="testmode"]').closest(".form-group, .fitem"),helperHtml=`\n            <div id="payu-sandbox-helper" class="alert alert-info mt-3" style="display: none;">\n                <h4><i class="fa fa-flask"></i> Sandbox Mode - Test Credentials</h4>\n                <p>These are the official PayU test credentials for Colombia sandbox environment:</p>\n                <div class="row">\n                    <div class="col-md-6">\n                        <dl class="row">\n                            <dt class="col-sm-4">Merchant ID:</dt>\n                            <dd class="col-sm-8"><code>${SANDBOX_CREDENTIALS.merchantid}</code></dd>\n                            <dt class="col-sm-4">Account ID:</dt>\n                            <dd class="col-sm-8"><code>${SANDBOX_CREDENTIALS.payuaccountid}</code></dd>\n                        </dl>\n                    </div>\n                    <div class="col-md-6">\n                        <dl class="row">\n                            <dt class="col-sm-4">API Login:</dt>\n                            <dd class="col-sm-8"><code>${SANDBOX_CREDENTIALS.apilogin}</code></dd>\n                            <dt class="col-sm-4">API Key:</dt>\n                            <dd class="col-sm-8"><code>${SANDBOX_CREDENTIALS.apikey}</code></dd>\n                        </dl>\n                    </div>\n                </div>\n                <button type="button" class="btn btn-primary" id="payu-autofill-sandbox">\n                    <i class="fa fa-magic"></i> Auto-fill Sandbox Credentials\n                </button>\n                <button type="button" class="btn btn-secondary ml-2" id="payu-copy-credentials">\n                    <i class="fa fa-clipboard"></i> Copy Credentials\n                </button>\n            </div>\n        `;$testModeRow.after(helperHtml),$("#payu-autofill-sandbox").on("click",autofillSandboxCredentials),$("#payu-copy-credentials").on("click",copySandboxCredentials)},showSandboxPrompt=function(){const $merchantId=$('input[name="merchantid"]'),$accountId=$('input[name="payuaccountid"]'),$apiLogin=$('input[name="apilogin"]'),$apiKey=$('input[name="apikey"]');$merchantId.val()||$accountId.val()||$apiLogin.val()||$apiKey.val()||confirm("Would you like to auto-fill the sandbox test credentials?")&&autofillSandboxCredentials()},autofillSandboxCredentials=function(){$('input[name="merchantid"]').val(SANDBOX_CREDENTIALS.merchantid),$('input[name="payuaccountid"]').val(SANDBOX_CREDENTIALS.payuaccountid),$('input[name="apilogin"]').val(SANDBOX_CREDENTIALS.apilogin),$('input[name="apikey"]').val(SANDBOX_CREDENTIALS.apikey);const $apiKeyField=$('input[name="apikey"]'),$unmaskButton=$apiKeyField.siblings(".unmask");$unmaskButton.length&&"password"===$apiKeyField.attr("type")&&$unmaskButton.trigger("click"),Notification.addNotification({message:"Sandbox credentials have been filled successfully.",type:"success"}),highlightSandboxMode()},copySandboxCredentials=function(){const credentials=`\nMerchant ID: ${SANDBOX_CREDENTIALS.merchantid}\nAccount ID: ${SANDBOX_CREDENTIALS.payuaccountid}\nAPI Login: ${SANDBOX_CREDENTIALS.apilogin}\nAPI Key: ${SANDBOX_CREDENTIALS.apikey}\n        `.trim();if(navigator.clipboard)navigator.clipboard.writeText(credentials).then((function(){Notification.addNotification({message:"Credentials copied to clipboard!",type:"success"})}));else{const $temp=$("<textarea>");$("body").append($temp),$temp.val(credentials).select(),document.execCommand("copy"),$temp.remove(),Notification.addNotification({message:"Credentials copied to clipboard!",type:"success"})}},highlightSandboxMode=function(){if(!$("#payu-sandbox-indicator").length){const indicator='\n                <div id="payu-sandbox-indicator" class="alert alert-warning mb-3">\n                    <i class="fa fa-exclamation-triangle"></i> \n                    <strong>SANDBOX MODE ACTIVE</strong> - Transactions will be processed in test environment\n                </div>\n            ';$("form#mform1").prepend(indicator)}},setupPaymentPage=function($paymentForm){("1"===$paymentForm.data("testmode")||!0===$paymentForm.data("testmode"))&&(addTestModeIndicator(),addTestHelpers())},addTestModeIndicator=function(){$("#payu-checkout-form").prepend('\n            <div class="alert alert-warning mb-3" id="payu-test-indicator">\n                <h4><i class="fa fa-flask"></i> Test Mode Active</h4>\n                <ul class="mb-0">\n                    <li>You are in PayU sandbox environment</li>\n                    <li>No real money will be charged</li>\n                    <li>Use the test data provided below</li>\n                </ul>\n            </div>\n        ')},addTestHelpers=function(){const $creditCardSection=$('.payment-method-fields[data-method="creditcard"]');$creditCardSection.length&&addCreditCardTestHelper($creditCardSection);const $pseSection=$('.payment-method-fields[data-method="pse"]');$pseSection.length&&addPSETestHelper($pseSection);const $nequiSection=$('.payment-method-fields[data-method="nequi"]');$nequiSection.length&&addNequiTestHelper($nequiSection);const $cashSection=$('.payment-method-fields[data-method="cash"]');$cashSection.length&&addCashTestHelper($cashSection)},addCreditCardTestHelper=function($section){$section.prepend('\n            <div class="alert alert-info test-helper">\n                <h5><i class="fa fa-credit-card"></i> Test Credit Cards</h5>\n                <div class="form-group">\n                    <select class="form-control test-card-selector">\n                        <option value="">-- Select a test card --</option>\n                        <option value="VISA_APPROVED">Visa (Approved)</option>\n                        <option value="MASTERCARD_APPROVED">Mastercard (Approved)</option>\n                        <option value="AMEX_APPROVED">American Express (Approved)</option>\n                        <option value="DINERS_APPROVED">Diners (Approved)</option>\n                        <option value="VISA_DECLINED">Visa (Declined)</option>\n                        <option value="VISA_INSUFFICIENT">Visa (Insufficient Funds)</option>\n                    </select>\n                </div>\n                <button type="button" class="btn btn-sm btn-primary fill-test-card">\n                    <i class="fa fa-magic"></i> Fill Test Card\n                </button>\n            </div>\n        '),$section.find(".fill-test-card").on("click",(function(){const selectedCard=$section.find(".test-card-selector").val();selectedCard&&TEST_CARDS[selectedCard]&&fillCreditCardData(TEST_CARDS[selectedCard])})),$section.find(".test-card-selector").on("change",(function(){const selectedCard=$(this).val();selectedCard&&TEST_CARDS[selectedCard]&&fillCreditCardData(TEST_CARDS[selectedCard])}))},fillCreditCardData=function(cardData){$("#cardholder").val(cardData.name),$("#cardnumber").val(cardData.number),$("#expmonth").val(cardData.expMonth),$("#expyear").val(cardData.expYear),$("#cvv").val(cardData.cvv),$("#cardnetwork").val(cardData.network),$("#cc_phone").val("3001234567"),$("#cc_documentnumber").val("1234567890"),Notification.addNotification({message:"Test card data filled",type:"info"})},addPSETestHelper=function($section){$section.prepend('\n            <div class="alert alert-info test-helper">\n                <h5><i class="fa fa-university"></i> Test PSE Bank Transfer</h5>\n                <p>Click the button to fill test PSE data:</p>\n                <button type="button" class="btn btn-sm btn-primary fill-test-pse">\n                    <i class="fa fa-magic"></i> Fill Test PSE Data\n                </button>\n            </div>\n        '),$section.find(".fill-test-pse").on("click",(function(){fillPSEData()}))},fillPSEData=function(){$("#psebank").val(TEST_PSE_bank),$("#pseusertype").val(TEST_PSE_userType),$("#pse_documentnumber").val(TEST_PSE_document),$("#pse_phone").val(TEST_PSE_phone),$("#pse_email").val(TEST_PSE_email),$("#cardholder").val(TEST_PSE_name),Notification.addNotification({message:"Test PSE data filled",type:"info"})},addNequiTestHelper=function($section){$section.prepend('\n            <div class="alert alert-info test-helper">\n                <h5><i class="fa fa-mobile"></i> Test Nequi Payment</h5>\n                <p>Use test phone number starting with 300:</p>\n                <button type="button" class="btn btn-sm btn-primary fill-test-nequi">\n                    <i class="fa fa-magic"></i> Fill Test Nequi Data\n                </button>\n            </div>\n        '),$section.find(".fill-test-nequi").on("click",(function(){fillNequiData()}))},fillNequiData=function(){$("#nequi_phone").val(TEST_NEQUI_phone),$("#nequi_documentnumber").val(TEST_NEQUI_document),Notification.addNotification({message:"Test Nequi data filled",type:"info"})},addCashTestHelper=function($section){$section.prepend('\n            <div class="alert alert-info test-helper">\n                <h5><i class="fa fa-money"></i> Test Cash Payment</h5>\n                <p>Fill test data for cash payment simulation:</p>\n                <button type="button" class="btn btn-sm btn-primary fill-test-cash">\n                    <i class="fa fa-magic"></i> Fill Test Cash Data\n                </button>\n            </div>\n        '),$section.find(".fill-test-cash").on("click",(function(){fillCashData()}))},fillCashData=function(){$("#cash_documentnumber").val(TEST_CASH_document),$("#cash_phone").val(TEST_CASH_phone),Notification.addNotification({message:"Test cash payment data filled",type:"info"})};return{init:function(){const $testModeCheckbox=$("form#mform1").find('input[name="testmode"]');$testModeCheckbox.length>0&&setupConfigPage($testModeCheckbox);const $paymentForm=$("#payu-checkout-form");$paymentForm.length>0&&setupPaymentPage($paymentForm)},getSandboxCredentials:function(){return SANDBOX_CREDENTIALS},getTestCards:function(){return TEST_CARDS}}}));

//# sourceMappingURL=config_helper.min.js.map